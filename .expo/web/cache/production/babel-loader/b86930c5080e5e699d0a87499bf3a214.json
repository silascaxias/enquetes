{"ast":null,"code":"var _interopRequireWildcard=require(\"@babel/runtime/helpers/interopRequireWildcard\");var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _regenerator=_interopRequireDefault(require(\"@babel/runtime/regenerator\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _react=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native\");var strings=_interopRequireWildcard(require(\"./strings\"));var _styles=_interopRequireDefault(require(\"./styles\"));var _styles2=_interopRequireDefault(require(\"./../../resources/styles\"));var _PollDetails=require(\"../../actions/PollDetails\");var _reactRedux=require(\"react-redux\");var _api=_interopRequireDefault(require(\"../../network/api\"));function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}var PollDetails=function(_Component){(0,_inherits2.default)(PollDetails,_Component);var _super=_createSuper(PollDetails);function PollDetails(){var _this;(0,_classCallCheck2.default)(this,PollDetails);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isLoading:true};_this.fetchPoll=function _callee(){var response,serverError;return _regenerator.default.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regenerator.default.awrap(_api.default.get(\"/poll/\"+_this.props.selectedID+\"/stats\"));case 3:response=_context.sent;if(response.ok){_this.props.setPoll(response.data);_this.setState({isLoading:false});}else{_this.setState({isLoading:false});serverError=response.data.error;_reactNative.Alert.alert(serverError!=null?serverError:response.originalError.message);}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);_this.setState({isLoading:false});_reactNative.Alert.alert(_context.t0.error.toString());case 11:case\"end\":return _context.stop();}}},null,null,[[0,7]],Promise);};return _this;}(0,_createClass2.default)(PollDetails,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchPoll();}},{key:\"render\",value:function render(){var poll=this.props.poll;return this.state.isLoading?_react.default.createElement(_reactNative.View,{style:[_styles.default.indicatorContainer,_styles.default.indicatorHorizontal]},_react.default.createElement(_reactNative.ActivityIndicator,{size:\"large\",color:\"#DA552F\"})):_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_reactNative.View,{style:[_styles2.default.defaultBorder,_styles.default.additionalContainer]},_react.default.createElement(_reactNative.Text,{style:_styles.default.pollTitle},this.props.pollDescription)),_react.default.createElement(_reactNative.ScrollView,null,_react.default.createElement(_reactNative.Text,null,poll.views)));}}]);return PollDetails;}(_react.Component);PollDetails.navigationOptions={title:strings.title};var mapStateToProps=function mapStateToProps(state){return{pollDescription:state.pollDetailsReducer.pollDescription,selectedID:state.pollDetailsReducer.selectedID,poll:state.pollDetailsReducer.poll};};var mapStateToDispatch=function mapStateToDispatch(dispatch){return{setPoll:function setPoll(poll){return dispatch((0,_PollDetails.setStatsPoll)(poll));}};};var _default=(0,_reactRedux.connect)(mapStateToProps,mapStateToDispatch)(PollDetails);exports.default=_default;","map":{"version":3,"sources":["/Users/scaxias/Projetos/Estudos/Enquetes/src/screens/PollDetails/index.js"],"names":["PollDetails","state","isLoading","fetchPoll","api","get","props","selectedID","response","ok","setPoll","data","setState","serverError","error","Alert","alert","originalError","message","toString","poll","styles","indicatorContainer","indicatorHorizontal","globalStyles","defaultBorder","additionalContainer","pollTitle","pollDescription","views","Component","navigationOptions","title","strings","mapStateToProps","pollDetailsReducer","mapStateToDispatch","dispatch"],"mappings":"iyBAAA,qDACA,yCACA,0DAEA,wDACA,yEACA,sDAEA,uCACA,8D,stBAEMA,CAAAA,W,4VAKJC,K,CAAQ,CACNC,SAAS,CAAE,IADL,C,OAIRC,S,CAAY,gOAEeC,aAAIC,GAAJ,UAAiB,MAAKC,KAAL,CAAWC,UAA5B,UAFf,SAEFC,QAFE,eAIR,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACf,MAAKH,KAAL,CAAWI,OAAX,CAAmBF,QAAQ,CAACG,IAA5B,EACA,MAAKC,QAAL,CAAc,CAACV,SAAS,CAAE,KAAZ,CAAd,EACD,CAHD,IAGO,CACL,MAAKU,QAAL,CAAc,CAACV,SAAS,CAAE,KAAZ,CAAd,EACMW,WAFD,CAEeL,QAAQ,CAACG,IAAT,CAAcG,KAF7B,CAGLC,mBAAMC,KAAN,CACEH,WAAW,EAAI,IAAf,CAAsBA,WAAtB,CAAoCL,QAAQ,CAACS,aAAT,CAAuBC,OAD7D,EAGD,CAbO,+EAeR,MAAKN,QAAL,CAAc,CAACV,SAAS,CAAE,KAAZ,CAAd,EACAa,mBAAMC,KAAN,CAAY,YAAIF,KAAJ,CAAUK,QAAV,EAAZ,EAhBQ,yE,iHAoBQ,CAClB,KAAKhB,SAAL,GACD,C,uCAEQ,CACP,GAAMiB,CAAAA,IAAI,CAAG,KAAKd,KAAL,CAAWc,IAAxB,CAEA,MAAO,MAAKnB,KAAL,CAAWC,SAAX,CACL,6BAAC,iBAAD,EAAM,KAAK,CAAE,CAACmB,gBAAOC,kBAAR,CAA4BD,gBAAOE,mBAAnC,CAAb,EACE,6BAAC,8BAAD,EAAmB,IAAI,CAAC,OAAxB,CAAgC,KAAK,CAAC,SAAtC,EADF,CADK,CAKL,0DACE,6BAAC,iBAAD,EAAM,KAAK,CAAE,CAACC,iBAAaC,aAAd,CAA6BJ,gBAAOK,mBAApC,CAAb,EACE,6BAAC,iBAAD,EAAM,KAAK,CAAEL,gBAAOM,SAApB,EAAgC,KAAKrB,KAAL,CAAWsB,eAA3C,CADF,CADF,CAIE,6BAAC,uBAAD,MACE,6BAAC,iBAAD,MAAOR,IAAI,CAACS,KAAZ,CADF,CAJF,CALF,CAcD,C,yBAlDuBC,gB,EAApB9B,W,CACG+B,iB,CAAoB,CACzBC,KAAK,CAAEC,OAAO,CAACD,KADU,C,CAoD7B,GAAME,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACjC,KAAD,CAAW,CACjC,MAAO,CACL2B,eAAe,CAAE3B,KAAK,CAACkC,kBAAN,CAAyBP,eADrC,CAELrB,UAAU,CAAEN,KAAK,CAACkC,kBAAN,CAAyB5B,UAFhC,CAGLa,IAAI,CAAEnB,KAAK,CAACkC,kBAAN,CAAyBf,IAH1B,CAAP,CAKD,CAND,CAQA,GAAMgB,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,CAAc,CACvC,MAAO,CACL3B,OAAO,CAAE,iBAACU,IAAD,QAAUiB,CAAAA,QAAQ,CAAC,8BAAajB,IAAb,CAAD,CAAlB,EADJ,CAAP,CAGD,CAJD,C,aAMe,wBAAQc,eAAR,CAAyBE,kBAAzB,EAA6CpC,WAA7C,C","sourcesContent":["import React, {Component} from 'react';\nimport {Text, Alert, View, ActivityIndicator, ScrollView} from 'react-native';\nimport * as strings from './strings';\n\nimport styles from './styles';\nimport globalStyles from './../../resources/styles';\nimport {setStatsPoll} from '../../actions/PollDetails';\n\nimport {connect} from 'react-redux';\nimport api from '../../network/api';\n\nclass PollDetails extends Component {\n  static navigationOptions = {\n    title: strings.title,\n  };\n\n  state = {\n    isLoading: true,\n  };\n\n  fetchPoll = async () => {\n    try {\n      const response = await api.get(`/poll/${this.props.selectedID}/stats`);\n\n      if (response.ok) {\n        this.props.setPoll(response.data);\n        this.setState({isLoading: false});\n      } else {\n        this.setState({isLoading: false});\n        const serverError = response.data.error;\n        Alert.alert(\n          serverError != null ? serverError : response.originalError.message,\n        );\n      }\n    } catch (err) {\n      this.setState({isLoading: false});\n      Alert.alert(err.error.toString());\n    }\n  };\n\n  componentDidMount() {\n    this.fetchPoll();\n  }\n\n  render() {\n    const poll = this.props.poll;\n\n    return this.state.isLoading ? (\n      <View style={[styles.indicatorContainer, styles.indicatorHorizontal]}>\n        <ActivityIndicator size=\"large\" color=\"#DA552F\" />\n      </View>\n    ) : (\n      <>\n        <View style={[globalStyles.defaultBorder, styles.additionalContainer]}>\n          <Text style={styles.pollTitle}>{this.props.pollDescription}</Text>\n        </View>\n        <ScrollView>\n          <Text>{poll.views}</Text>\n        </ScrollView>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    pollDescription: state.pollDetailsReducer.pollDescription,\n    selectedID: state.pollDetailsReducer.selectedID,\n    poll: state.pollDetailsReducer.poll,\n  };\n};\n\nconst mapStateToDispatch = (dispatch) => {\n  return {\n    setPoll: (poll) => dispatch(setStatsPoll(poll)),\n  };\n};\n\nexport default connect(mapStateToProps, mapStateToDispatch)(PollDetails);\n"]},"metadata":{},"sourceType":"script"}